# PySC2

PySC2 - библиотека, созданная компанией DeepMind и предназначеная для написания искустенного интелекта, обучающегося посредством большого количества итераций.


## Окружение (Enviroment)

Полное описание спецификации конфигурации окружения (enviroment), наблюдения (observation) и рабочего пространства можно найти [здесь](https://github.com/deepmind/pysc2/blob/master/docs/environment.md)

## Данные наблюдения (Observations)

Starcraft II имеет очень богатое набор действий и множество параметров игрового мира. Игра выводит как пространственные / визуальные  данные, так и структурированные данные игрового мира. Структурированные данные определяют все информативные элементы, расположенные на экране (например колличество минералов),  агенты могут не распознать эти элементы как информацию, особенно при низком разрешении. К тому же трудно воспроизвести повтор в точно таком же формате, что видел человек.

### Примечание

Параметры игрового мира хранятся в координатном пространстве (y, х). Но действия, требующие координату точки на экране или миникарте, ожидают координаты в формате (x, y). Начало координат (0, 0) находится в левом верхнем углу в обоих случаях.

Пример передачи экранной координаты действию (см. в разделе скриптовые агенты):
```python
# Spatial observations have the y-coordinate first:
y, x = (obs.observation["feature_screen"][_PLAYER_RELATIVE] == _PLAYER_NEUTRAL).nonzero()

# Actions expect x-coordinate first:
target = [int(x.mean()), int(y.mean())]
action = actions.FunctionCall.Move_screen("now", target)
```

### Пространственно-визуальные данные

#### RGB-матрица (RGB Pixels)

RGB-матрица доступна как для основной области экрана, так и для мини-карты при выбранном разрешении. Перспектива используется как и на экране у человека, но не включает весь дополнительные декорации вокруг экрана, такие как командная карта, окно выбора, очередь сборки и т. д. Они доступны как `rgb_screen` и `rgb_minimap`.

#### Векторные слои (Feature layers)

Игра также предоставляет векторные слои. Они представляют примерно ту же информацию, что и RGB-матрица,но информация разложена и структурирована. Существует ~25 векторных слоев, включая экран и мини-карту и доступных как `feature_screen` и `feature_minimap`.

Полный список определяется в `pysc2.lib.features`.

##### Миникарта

Векторные слои для миникарты:

 - **height_map** - показывает уровень высоты местности.
 - **visibility** - какая часть карты скрыта, была видна или видна сейчас.
 - **creep** - какие части карты покрыта слизью зерга.
 - **camera** - какая часть карты наблюдается на экране.
 - **player_id** - кто владеет юнитами, возвращает абсолютный идентификатор.
 - **player_relative** - отображает дружелюбность/враждебность юнитов.
 - **selected** - какие юниты выбраны.

 **player_relative** принимает значения в диапазоне [0, 4], которые обозначают [фоновый, самостоятельный, союзный, нейтральный, вражеский] юнит соответственно.

#### Экран

Векторные слои для экрана:

 - **height_map** - показывает уровень высоты местности.
 - **visibility** - какая часть карты скрыта, была видна или видна сейчас.
 - **creep** - какие части карты покрыта слизью зерга.
 - **power** - какие юниты протоссов имеют силу, показывает только вашу силу.
 - **player_id** - кто владеет юнитами, возвращает абсолютный идентификатор.
 - **player_relative** - отображает дружелюбность/враждебность юнитов.
 - **unit_type** - идентификатор типа юнита,
 - **selected** - какие юниты выбраны.
 - **hit_points** - количество хитов у юнитов.
 - **energy** - сколько энергии у юнита.
 - **shields** - прочность щитов у юнита. Только для протоссов.
 - **unit_density** - сколько единиц в этом пикселе.
 - **unit_density_aa** - сглаженная версия **unit_density** с ограничением в 16 единиц на пиксель.

Индентификаторы для **unit_type** можно найти в pysc2/lib/units.py.
**player_relative** принимает такие же значения как и для миникарты в диапазоне [0, 4].
**unit_density_aa** дает вам суб-пикселей расположение и размер. Например, если Единица измерения имеет диаметр ровно 1 пиксель, unit_density будет показывать ее ровно в 1 пиксель, независимо от того, где в этом пикселе она фактически центрирована. unit_density_aa вместо этого скажет вам, сколько каждого пикселя покрыто единицей. Единица измерения, которая меньше пикселя и центрирована в пикселе, будет давать значение меньше, чем максимальное. Единица с диаметром 1, центрированная около угла пикселя, даст примерно четверть его значения каждому из 4 пикселей, которые он покрывает. Если несколько единиц охватывают пиксель, их доля в покрытом пикселе будет суммирована до 256.

### Бинарные файлы

Все запускаемые файлы модуля **PySC2** расположеные в папке `pysc2/bin`

- pysc2/bin
    - **agent** - Запускает агента для тестирования среды
    - **gen_actions** - Создает список возможных действий (нужны карты)
    - **map_list** - Выводит список карт
    - **play** - Запускает SC2 для игры или реплея
    - **replay_actions** - Выводит список действий из реплеев
    - **replay_info** - Выводит информацию о реплеях (Отвратительная реализация)
    - **valid_actions** - Печатает доступные действия



